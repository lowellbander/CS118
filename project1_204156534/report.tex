\documentclass{article}
\usepackage{graphicx}

\usepackage{titling}
\newcommand{\subtitle}[1]{%
  \posttitle{%
    \par\end{center}
    \begin{center}\large#1\end{center}
    \vskip0.5em}%
}

\begin{document}
\title{Project 1 Report}
\subtitle{CS 118, Fall 2014}
\author{Lowell Bander\\ UID 204 156 534\\ SEASnet Logon \texttt{paige} \and
Akshay Bakshi\\ UID 104 160 782\\ SEASnet Logon \texttt{bakshi}}
\maketitle
\tableofcontents
\newpage

\section{Server Design}
\textit{Give a high-level description of your server’s design.}\\

We began with the sample code provided in \texttt{serverFork.c}, and then added our own code which copied the request message from the socket to a local buffer, then printed the contents of the buffer to the console so as to satisfy the requirements in Part A. \\

For Part B, we started by trying to return an HTML file whose name was hard coded into our source code. Using that filename, we read the file into memory using \texttt{fopen()} and \texttt{getc()}. We then wrote this HTML to the client using \texttt{write()}. To complete Part B, we parsed the HTTP request header using a tokenizer to determine the requested filename, then either returned the contents of file or returned a 404 message if the file did not exist in the web server's directory. \\

Finally, we noticed that the way our web server handles HTML files (reading them in as a series of bytes) would likely seamlessly support binary files, such as PNG files or executables. We tested this hypothesis and determined that it was correct.
\section{Difficulties}
\textit{What difficulties did you face and how did you solve them?}\\

After creating our VM, we tried to install git, but were unsuccessful because the provided version of the OS is so old that it is no longer supported. In order to edit our source code in our host environment but still be able to test it in the guest VM, we created a shared folder.\\

Once this was set up, our only remaining difficulties were not so much with understanding the network communication protocol as much as simple programming errors, such as forgetting to increment our index variable as we loop through an array or making errors in our pointer arithmetic. When one of us would run such a problem and not be able to solve it within a few minutes, we would have the other person check our code with a fresh pair of eyes.
\newpage

\section{Manual}
\label{sec:manual}
\textit{Include a brief manual on how to compile and run your source code.}\\
\subsection{Running Part A}
To build \texttt{webserver.c}, run \texttt{cd project1\_204156534/ \&\& make}. Then, to start the server at the port 1234, for example, run \texttt{./webserver 1234}. If you now open a web browser, such as Firefox, and go to the URL \texttt{localhost:1234}, the terminal running the instance of \texttt{webserver} will print to the console the HTTP request headers generated by the web browser.\\
\subsection{Running Part B}
To fetch a particular file, enter \texttt{localhost:1234/theFileYouWant.html} as the URL in your web browser, and our web server will fetch it for you if it exists. If it doesn't, it will return a 404. In the preceding example, we used an HTML file, but our server can also serve binary files, such as executables or PNG's.
\section{Tests}
\textit{Show some simple test results from your program.}\\

For all tests, it is necessary that you first build and run the web server, and then open a web browser such as Firefox. If you do not know how to do this, see the manual in Part~\ref{sec:manual}.
\subsection{Testing that the Server Responds}
In a web browser, go to the URL \texttt{localhost:1234}, or any other port number greater than 1024. In the terminal running the web server, you should something similar to  the following printed to the console:\\

\noindent\texttt{GET / HTTP/1.1\\
Host: localhost:1235\\
User-Agent: Mozilla/5.0 (X11; Linux i686; rv:7.0.1) Gecko/20100101 Firefox/7.0.1\\
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\\
Accept-Language: en-us,en;q=0.5\\
Accept-Encoding: gzip, deflate\\
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7\\
Connection: keep-alive\\
}
\newpage
\subsection{Testing that the Server Fetches HTML}
After placing an HTML file in the same directory as the running instance \texttt{webserver}, you can request that the server deliver it to the web browser using an URL like \texttt{localhost:1234/theFileYouWant.html}.\\
\begin{figure}[h]
\centering
\includegraphics[width=12cm]{200.png}
\caption{\textbf{Sample HTML returned by the server and rendered in a browser running on the client.}}
\end{figure}•
\subsection{Testing that the Server Fetches Binary Files}
To fetch a binary file, use the same strategy as you with an HTML file, but instead place a file such as an executable or a PNG in the same directory as the running instance of \texttt{webserver}.
\begin{figure}[h]
\includegraphics[width=6cm]{png.png}
\includegraphics[width=6cm]{exe.png}
\caption{\textbf{Fetching a binary file.} A PNG file (left) and an executable (right) are fetched and returned to the client by the server.}
\end{figure}•
\newpage

\subsection{Behaviour When File Not Found}
When the client requests a file that does not exist in the same directory as the running instance of \texttt{web server}, the browser returns a 404 response.\\
\begin{figure}[h]
\includegraphics[width=12cm]{404.png}
\caption{\textbf{A 404 is returned when a file is created that does not exist.}}

\end{figure}•




\end{document}
